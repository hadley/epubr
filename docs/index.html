<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Read EPUB File Metadata and Text • epubr</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><link href="extra.css" rel="stylesheet">
<meta property="og:title" content="Read EPUB File Metadata and Text">
<meta property="og:description" content="Provides functions supporting the reading and parsing of internal e-book content from EPUB files. 
    E-book formatting is non-standard enough across all literature that no function can curate parsed e-book content across an arbitrary collection of e-books, 
    in completely general form, resulting in a singular, consistently formatted output containing all the same variables.
    EPUB file parsing functionality in this package is intended for relatively general application to arbitrary e-books. 
    However, poorly formatted e-books or e-books with highly uncommon formatting may not work with this package. 
    Text is read 'as is'. Additional text cleaning should be performed by the user at their discretion, such as with functions from packages like 'tm' or 'qdap'.">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-46129458-3"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-46129458-3');
</script>
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">epubr</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">0.4.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="articles/epubr.html">Get started</a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Online
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="https://github.com/leonawicz">
        <span class="fa fa-github fa-lg"></span>
         
        GitHub
      </a>
    </li>
    <li>
      <a href="https://twitter.com/leonawicz">
        <span class="fa fa-twitter fa-lg"></span>
         
        Twitter
      </a>
    </li>
    <li>
      <a href="https://www.linkedin.com/in/leonawicz">
        <span class="fa fa-linkedin fa-lg"></span>
         
        LinkedIn
      </a>
    </li>
    <li>
      <a href="https://www.youtube.com/user/StatisticsWithR">
        <span class="fa fa-youtube fa-lg"></span>
         
        YouTube
      </a>
    </li>
    <li>
      <a href="https://plus.google.com/+StatisticsWithR/posts">
        <span class="fa fa-google-plus fa-lg"></span>
         
        Google+
      </a>
    </li>
    <li>
      <a href="https://leonawicz.github.io/blog/">
        <span class="fa fa-pencil-square-o fa-lg"></span>
         
        Blog
      </a>
    </li>
  </ul>
</li>
<li>
  <a href="https://github.com/ropensci/epubr">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    

    
    
<!-- README.md is generated from README.Rmd. Please edit that file -->
<div id="epubr" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#epubr" class="anchor"></a>epubr <img src="https://github.com/ropensci/epubr/blob/master/data-raw/epubr.png?raw=true" style="margin-left:10px;margin-bottom:5px;" width="120" align="right">
</h1></div>
<p><br><strong>Author:</strong> <a href="https://leonawicz.github.io/blog/">Matthew Leonawicz</a><br><strong>License:</strong> <a href="https://opensource.org/licenses/MIT">MIT</a><br></p>
<p><a href="https://cran.r-project.org/package=epubr"><img src="http://www.r-pkg.org/badges/version/epubr" alt="CRAN status"></a> <a href="https://cran.r-project.org/package=epubr"><img src="http://cranlogs.r-pkg.org/badges/grand-total/epubr" alt="CRAN downloads"></a> <a href="https://github.com/ropensci/onboarding/issues/222"><img src="https://badges.ropensci.org/222_status.svg"></a> <a href="http://www.rdocumentation.org/packages/epubr"><img src="http://www.rdocumentation.org/badges/version/epubr" alt="Rdoc"></a> <a href="https://travis-ci.org/ropensci/epubr"><img src="https://travis-ci.org/ropensci/epubr.svg?branch=master" alt="Travis-CI Build Status"></a> <a href="https://ci.appveyor.com/project/leonawicz/epubr"><img src="https://ci.appveyor.com/api/projects/status/github/leonawicz/epubr?branch=master&amp;svg=true" alt="AppVeyor Build Status"></a> <a href="https://codecov.io/gh/ropensci/epubr"><img src="https://codecov.io/gh/ropensci/epubr/branch/master/graph/badge.svg" alt="codecov"></a></p>
<p><a href="https://gitter.im/leonawicz/epubr"><img src="https://img.shields.io/badge/GITTER-join%20chat-green.svg" alt="gitter"></a></p>
<div id="read-epub-files-in-r" class="section level2">
<h2 class="hasAnchor">
<a href="#read-epub-files-in-r" class="anchor"></a>Read EPUB files in R</h2>
<p>Read metadata and textual content of epub files.</p>
<p><code>epubr</code> provides functions supporting the reading and parsing of internal e-book content from EPUB files. E-book metadata and text content are parsed separately and joined together in a tidy, nested tibble data frame.</p>
<p>E-book formatting is non-standard enough across all literature that no function can curate parsed e-book content across an arbitrary collection of e-books, in completely general form, resulting in a singular, consistently formatted output containing all the same variables.</p>
<p>EPUB file parsing functionality in this package is intended for relatively general application to arbitrary EPUB e-books. However, poorly formatted e-books or e-books with highly uncommon formatting may not work with this package. Text is read ‘as is’. Additional text cleaning should be performed by the user at their discretion, such as with functions from packages like <code>tm</code> or <code>qdap</code>.</p>
</div>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>Install <code>epubr</code> from CRAN with:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">install.packages</span>(<span class="st">"epubr"</span>)</code></pre></div>
<p>Install the development version from GitHub with:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># install.packages("devtools")</span>
devtools<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/devtools/topics/install_github">install_github</a></span>(<span class="st">"ropensci/epubr"</span>)</code></pre></div>
<p><em>Note: Prior versions required R &gt;= 3.5.0 due to package dependencies. This is no longer the case, but if using R &lt; 3.5.0, install from GitHub until the next CRAN release.</em></p>
</div>
<div id="example" class="section level2">
<h2 class="hasAnchor">
<a href="#example" class="anchor"></a>Example</h2>
<p>Bram Stoker’s Dracula novel sourced from Project Gutenberg is a good example of an EPUB file with unfortunate formatting. The first thing that stands out is the naming convention using <code>item</code> followed by some ordered digits does not differentiate sections like the book preamble from the chapters. The numbering also starts in a weird place. But it is actually worse than this. Notice that sections are not broken into chapters; they can begin and end in the middle of chapters!</p>
<p>These annoyances aside, the metadata and contents can still be read into a convenient table. Text mining analyses can still be performed on the overall book, if not so easily on individual chapters.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">file &lt;-<span class="st"> </span><span class="kw">system.file</span>(<span class="st">"dracula.epub"</span>, <span class="dt">package =</span> <span class="st">"epubr"</span>)
(x &lt;-<span class="st"> </span><span class="kw"><a href="reference/epub.html">epub</a></span>(file))
<span class="co">#&gt; # A tibble: 1 x 9</span>
<span class="co">#&gt;   rights  identifier   creator  title language subject date  source  data </span>
<span class="co">#&gt;   &lt;chr&gt;   &lt;chr&gt;        &lt;chr&gt;    &lt;chr&gt; &lt;chr&gt;    &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt;   &lt;lis&gt;</span>
<span class="co">#&gt; 1 Public~ http://www.~ Bram St~ Drac~ en       Horror~ 1995~ http:/~ &lt;tib~</span>

x<span class="op">$</span>data[[<span class="dv">1</span>]]
<span class="co">#&gt; # A tibble: 15 x 4</span>
<span class="co">#&gt;    section       text                                          nword nchar</span>
<span class="co">#&gt;    &lt;chr&gt;         &lt;chr&gt;                                         &lt;int&gt; &lt;int&gt;</span>
<span class="co">#&gt;  1 item6         "The Project Gutenberg EBook of Dracula, by ~ 11252 60972</span>
<span class="co">#&gt;  2 item7         "But I am not in heart to describe beauty, f~ 13740 71798</span>
<span class="co">#&gt;  3 item8         "“ ‘Lucy, you are an honest-hearted girl, I ~ 12356 65522</span>
<span class="co">#&gt;  4 item9         "CHAPTER VIIIMINA MURRAY’S JOURNAL\nSame day~ 12042 62724</span>
<span class="co">#&gt;  5 item10        "CHAPTER X\nLetter, Dr. Seward to Hon. Arthu~ 12599 66678</span>
<span class="co">#&gt;  6 item11        "Once again we went through that ghastly ope~ 11919 62949</span>
<span class="co">#&gt;  7 item12        "CHAPTER XIVMINA HARKER’S JOURNAL\n23 Septem~ 12003 62234</span>
<span class="co">#&gt;  8 item13        "CHAPTER XVIDR. SEWARD’S DIARY—continued\nIT~ 13812 72903</span>
<span class="co">#&gt;  9 item14        "“Thus when we find the habitation of this m~ 13201 69779</span>
<span class="co">#&gt; 10 item15        "“I see,” I said. “You want big things that ~ 12706 66921</span>
<span class="co">#&gt; 11 item16        "CHAPTER XXIIIDR. SEWARD’S DIARY\n3 October.~ 11818 61550</span>
<span class="co">#&gt; 12 item17        "CHAPTER XXVDR. SEWARD’S DIARY\n11 October, ~ 12989 68564</span>
<span class="co">#&gt; 13 item18        " \nLater.—Dr. Van Helsing has returned. He ~  8356 43464</span>
<span class="co">#&gt; 14 item19        "End of the Project Gutenberg EBook of Dracu~  2669 18541</span>
<span class="co">#&gt; 15 coverpage-wr~ ""                                                0     0</span></code></pre></div>
</div>
<div id="related-packages" class="section level2">
<h2 class="hasAnchor">
<a href="#related-packages" class="anchor"></a>Related packages</h2>
<p><a href="https://github.com/ropensci/tesseract">tesseract</a> by <span class="citation">@jeroen</span> for more direct control of the OCR process.</p>
<p><a href="https://github.com/ropensci/pdftools">pdftools</a> for extracting metadata and text from PDF files (therefore more specific to PDF, and without a Java dependency)</p>
<p><a href="https://github.com/ropensci/tabulizer">tabulizer</a> by <span class="citation">@leeper</span> and <span class="citation">@tpaskhalis</span>, Bindings for Tabula PDF Table Extractor Library, to extract tables, therefore not text, from PDF files.</p>
<p><a href="https://github.com/ropensci/rtika">rtika</a> by <span class="citation">@goodmansasha</span> for more general text parsing.</p>
<p><a href="https://github.com/ropenscilabs/gutenbergr">gutenbergr</a> by <span class="citation">@dgrtwo</span> for searching and downloading public domain texts from Project Gutenberg.</p>
<hr>
<p>Please note that this project is released with a <a href="CODE_OF_CONDUCT.html">Contributor Code of Conduct</a>. By participating in this project you agree to abide by its terms.</p>
<p><a href="https://ropensci.org"><img src="https://ropensci.org/public_images/ropensci_footer.png" alt="ropensci_footer"></a></p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Download from CRAN at <br><a href="https://cloud.r-project.org/package=epubr">https://​cloud.r-project.org/​package=epubr</a>
</li>
<li>Browse source code at <br><a href="https://github.com/ropensci/epubr">https://​github.com/​ropensci/​epubr</a>
</li>
<li>Report a bug at <br><a href="https://github.com/ropensci/epubr/issues">https://​github.com/​ropensci/​epubr/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>
<a href="http://leonawicz.github.io/">Matthew Leonawicz</a> <br><small class="roles"> Author, maintainer </small>  </li>
</ul>
</div>

      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by <a href="http://leonawicz.github.io/">Matthew Leonawicz</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  

  </body>
</html>
